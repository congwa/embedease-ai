# å•†å“æ¨è Agentï¼ˆLook & Run in 5 Minutesï¼‰


[æ¼”ç¤ºåŠ¨å›¾](http://qiniu.biomed168.com/agent0.gif)

![æ¼”ç¤ºåŠ¨å›¾](http://qiniu.biomed168.com/agent0.gif)

## 1. TL;DR

| æˆ‘æ˜¯è° | æˆ‘èƒ½åšä»€ä¹ˆ | æ€ä¹ˆè·‘èµ·æ¥ |
| :---- | :--------- | :--------- |
| åŸºäº **LangChain v1.1 + LangGraph** çš„ã€Œå•†å“æ¨è Agentã€ä¸€ä½“åŒ–å·¥ç¨‹ï¼ˆåç«¯ FastAPIï¼Œå‰ç«¯ Next.js 15ï¼‰ | å¤š LLM Provider æ¨ç†ã€è®°å¿†ç³»ç»Ÿã€ä¸Šä¸‹æ–‡å‹ç¼©ã€SSE æ—¶é—´çº¿ã€Todo & å•†å“å¡ç‰‡æ··åˆæµå¼å±•ç¤º | å‡†å¤‡ `.env` â†’ `uv sync && uvicorn`ï¼ˆåç«¯ï¼‰+ `pnpm dev`ï¼ˆå‰ç«¯ï¼‰â†’ æ‰“å¼€ `http://localhost:3000` |

### ğŸš€ æ•°æ®å½•å…¥ & çˆ¬è™«æ€ä¹ˆç”¨ï¼Ÿ

1. **ç«™ç‚¹çˆ¬è™«è°ƒåº¦**ï¼šENV_JSON_DIR æŒ‡åˆ° `.env.json` åå¡«å¥½ `CRAWLER_SITES_JSON.json`ï¼Œå¯åŠ¨åç«¯å°±ä¼šæŠŠç«™ç‚¹å¯¼å…¥å¹¶è‡ªåŠ¨æ³¨å†Œå®šæ—¶ä»»åŠ¡ã€‚
2. **å·¥å…·è°ƒç”¨ç¨³å¥æ€§ + TODO å¹¿æ’­**ï¼šå¼€å¯ `AGENT_TOOL_RETRY_* / AGENT_TOOL_LIMIT_* / AGENT_TODO_*`ï¼Œå³å¯çœ‹åˆ°å·¥å…·é‡è¯•ä¸ TODO å¡åœ¨å‰ç«¯æ—¶é—´çº¿ä¸Šå®æ—¶å‡ºç°ã€‚
3. **åˆ†ç±»/æ¨èå·¥å…·é“¾**ï¼šç›´æ¥è®©æ¨¡å‹â€œåˆ—å‡ºåˆ†ç±»å¹¶æ¨èã€é™„è´­ä¹°é“¾æ¥â€ï¼ŒAgent ä¼šä¸²èµ· 8 ä¸ªæ–°å·¥å…·å®Œæˆâ€œåˆ†ç±» â†’ ç­›é€‰ â†’ ç›¸ä¼¼/ç²¾é€‰ â†’ ä¸‹å•å…¥å£â€çš„ä¸€æ¡é¾™æµç¨‹ã€‚

---

## 2. å®ƒåˆ°åº•èƒ½åšä»€ä¹ˆï¼Ÿï¼ˆç”¨äººè¯è®²æ¸…æ¥šï¼‰

1. **åƒå®¢æœä¸€æ ·é™ªèŠ**ï¼šä½ é—®â€œå¸®æˆ‘æ‰¾ 3000 å…ƒä»¥å†…çš„è½»è–„æœ¬â€ï¼Œå®ƒä¼šå…ˆè·Ÿä½ æ¾„æ¸…éœ€æ±‚ï¼Œå†æŠŠå€™é€‰å•†å“åˆ—è¡¨æµå¼æ‰“å‡ºæ¥ï¼Œå¹¶è§£é‡Šä¸ºä»€ä¹ˆæ¨èå®ƒä»¬ã€‚
2. **è‡ªåŠ¨åˆ¤æ–­æ˜¯å¦çœŸçš„è¦æŸ¥èµ„æ–™**ï¼šåœ¨â€œéšä¾¿èŠèŠâ€å’Œâ€œåŠ¡å¿…ç»™äº‹å®ä¾æ®â€ä¹‹é—´è‡ªç”±åˆ‡æ¢â€”â€”`natural` æ›´éšå’Œã€`strict` ä¼šå¼ºåˆ¶è°ƒç”¨å·¥å…·ï¼Œå°½é‡ä¸ç»™â€œæˆ‘çŒœæ˜¯â€¦â€.
3. **è‡ªå·±æ€»ç»“ä¸Šä¸€è½®èŠäº†å•¥**ï¼šå¯¹è¯é‡Œè¶…è¿‡é˜ˆå€¼å°±è‡ªåŠ¨å‹ç¼©ä¸Šä¸‹æ–‡ï¼ŒæŠŠé‡ç‚¹ç”¨å¡ç‰‡æ¨åˆ°å‰ç«¯ï¼Œé˜²æ­¢æ¨¡å‹å¿˜è®°å…³é”®è¦æ±‚ã€‚
4. **è®°ä½ç”¨æˆ·åå¥½**ï¼šåŒä¸€ä¸ªç”¨æˆ· ID å¤šè½®å¯¹è¯åï¼Œä¼šå­˜ä¸‹é¢„ç®—ã€å“ç±»ã€å“ç‰Œã€è¯­æ°”ç­‰ç”»åƒï¼Œä¸‹æ¬¡å¼€åœºå°±èƒ½ â€œè®°å¾—ä½ ä¸Šæ¬¡è¯´æƒ³ä¹°è‹¹æœç”Ÿæ€â€çš„æ„Ÿè§‰ã€‚
5. **åŒæ­¥ Todo / æ¨ç†è¿‡ç¨‹**ï¼šå½“ Agent å†³å®šâ€œå…ˆå»æŸ¥åº“å­˜å†æ¯”è¾ƒä»·æ ¼â€æ—¶ï¼Œå‰ç«¯æ—¶é—´çº¿ä¼šè¹¦å‡º TODO å¡ï¼›æ¨ç†æ–‡æœ¬ä¸æœ€ç»ˆå›ç­”åˆ†å¼€ï¼Œè®©ä½ çŸ¥é“å®ƒç°åœ¨åœ¨æƒ³ä»€ä¹ˆã€‚
6. **éšæ—¶åˆ‡æ¢æ¨¡å‹/æˆæœ¬**ï¼šä¸€ä¸ª `.env` å°±èƒ½å†³å®šç”¨ OpenAI è¿˜æ˜¯å›½äº§æ¨¡å‹ï¼Œè¿˜èƒ½æŠŠ embedding/rerank æŒ‡åˆ°å¦ä¸€å®¶æœåŠ¡ï¼Œæ»¡è¶³â€œè€æ¿è¦çœé’±â€æˆ–â€œæˆ‘è¦æœ€å¼ºæ¨¡å‹â€çš„ä¸åŒéœ€æ±‚ã€‚

> ä¸€å¥è¯ï¼šå®ƒä¸ä»…ä¼šå›è¯ï¼Œè¿˜ä¼šè‡ªå·±ç»„ç»‡æ­¥éª¤ã€è®°å½•åå¥½ã€æŠŠè¿‡ç¨‹æ‘Šåœ¨é˜³å…‰ä¸‹ï¼Œé€‚åˆä½œä¸ºå•†å“å¯¼è´­ / å¤æ‚æ¯”è¾ƒä»»åŠ¡çš„åŸºç¡€å·¥ç¨‹ã€‚

## 3. åŠŸèƒ½é€Ÿè§ˆï¼ˆåç«¯ Ã— å‰ç«¯ï¼‰

| æ¨¡å— | èƒ½åŠ›ç‚¹ | è¯´æ˜ |
| --- | --- | --- |
| **LLM/æ¨ç†** | å¤š Provider & å¤šæ€æ¨ç†æ¨¡å‹ | ç»Ÿä¸€ `ReasoningChunk`ï¼ŒæŒ‰ providerï¼ˆOpenAI / SiliconFlow / DeepSeekâ€¦ï¼‰è‡ªåŠ¨é€‰æ‹©å®ç° |
| **å¯¹è¯æ¨¡å¼** | `natural / free / strict` | é€šè¿‡ `ToolPolicy` + ä¸­é—´ä»¶çº¦æŸå·¥å…·è°ƒç”¨æ¬¡æ•°ã€å…è®¸ç›´ç­”æˆ–å¤±è´¥å…œåº• |
| **æµå¼ä½“éªŒ** | SSE æ—¶é—´çº¿ã€æ¨ç†/æ­£æ–‡æ‹†æµ | `llm.call.*`ã€`assistant.reasoning.delta`ã€`assistant.todos` ç­‰äº‹ä»¶é©±åŠ¨å‰ç«¯æ—¶åºå¡ç‰‡ |
| **ä¸­é—´ä»¶ç¼–æ’** | Summarization / Todo / Sequential Tools | é…ç½®é©±åŠ¨æ³¨å…¥ï¼Œæ”¯æŒä¸Šä¸‹æ–‡å‹ç¼©å¹¿æ’­ã€å¾…åŠæ¨é€ã€ä¸²è¡Œå·¥å…·æ‰§è¡Œ |
| **è®°å¿†ç³»ç»Ÿ** | ç”¨æˆ·ç”»åƒ + äº‹å® + å›¾è°± + Orchestration | LangGraph Store / SQLite / Qdrant å¤šå±‚è®°å¿†ï¼Œé™„å¸¦ SSE è¿›åº¦äº‹ä»¶ |
| **å•†å“ä½“éªŒ** | å•†å“å‘é‡æ£€ç´¢ + å¡ç‰‡å±•ç¤º | æ ‡é… `search_products` å·¥å…·ã€Qdrant æ£€ç´¢ã€å‰ç«¯å•†å“ç½‘æ ¼ |
| **å‰ç«¯ UI** | æ—¶é—´çº¿å¼å¯¹è¯ + å¡ç‰‡æ··æ’ | Next.js 15 + Tailwind + shadcn/uiï¼Œè‡ªé€‚åº”å±•ç¤ºæ¨ç†ã€æ­¥éª¤ã€å•†å“ã€Todos |
| **é…ç½®/è¯Šæ–­** | `.env` å…¨é‡ç¤ºä¾‹ã€ç»“æ„åŒ–æ—¥å¿—ã€Swagger | `backend/.env.example` è¦†ç›–æ‰€æœ‰å¼€å…³ï¼Œ`/docs` è‡ªåŠ¨æ–‡æ¡£ï¼Œæ—¥å¿—æ”¯æŒ simple/detailed/json |

---

## 3. æ¶æ„é•¿ä»€ä¹ˆæ ·ï¼Ÿ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    SSE / REST    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    LLM / å‘é‡ / KV
â”‚ Frontend â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚   Backend   â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Next.js  â”‚    Timeline UI   â”‚ FastAPI +   â”‚                   â”‚
â”‚ Timeline â”‚                  â”‚ LangChain   â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚ LangGraph   â”‚    â”‚ OpenAI   â”‚   â”‚
      â–²                       â”‚ Agent + SSE â”‚    â”‚ DeepSeek â”‚   â”‚
      â”‚                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ Siliconâ€¦ â”‚   â”‚
      â”‚                             â–²            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
      â”‚                             â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
      â”‚                      SQLite / Qdrant â—€â”€â”€ â”‚  Qdrant  â”‚ â—€â”€â”˜
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ç”¨æˆ· â†”ï¸ å•†å“ â†”ï¸ ä¸­é—´ä»¶ â†”ï¸ è®°å¿† â†”ï¸ æ¨ç† â†”ï¸ SSE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. 5 åˆ†é’Ÿè·‘é€šï¼ˆçœŸçš„å°±ä¸‰æ­¥ï¼‰

> **å‰ç½®ä¾èµ–**ï¼šNode â‰¥ 18ã€Python 3.13ï¼ˆé¡¹ç›®ä½¿ç”¨ `uv`ï¼‰ã€Qdrantï¼ˆæœ¬åœ°æˆ–è¿œç«¯ï¼‰ã€LLM API Key

```bash
# â‘  Clone & å®‰è£…ä¾èµ–
git clone https://github.com/ä½ çš„è´¦å·/embedAi-agent.git
cd embedAi-agent

cd backend && uv sync        # åç«¯ä¾èµ–
cd ../frontend && pnpm install  # å‰ç«¯ä¾èµ–

# â‘¡ é…ç¯å¢ƒ
cd ../backend
cp .env.example .env          # æ¯ä¸ªå¼€å…³æ—éƒ½å†™äº†æ³¨é‡Šï¼Œç…§å¡«å³å¯
# æœ€å°‘éœ€è¦ LLM_PROVIDER / LLM_API_KEYï¼Œè‹¥æœ¬åœ°è·‘ Qdrant è®°å¾—ç¡®ä¿ 6333 ç«¯å£åœ¨çº¿

uv run python scripts/import_products.py  # â‘¢ å¯¼å…¥å•†å“æ ·ä¾‹

# â‘¢ å¯åŠ¨
uv run uvicorn app.main:app --reload --port 8000    # åç«¯
cd ../frontend && pnpm dev                          # å‰ç«¯
```

æµè§ˆå™¨æ‰“å¼€ **http://localhost:3000**ï¼Œå°±èƒ½çœ‹åˆ°æ—¶é—´çº¿å¼çš„å¯¹è¯ + å•†å“æ¨èç•Œé¢ã€‚

---

## 5. åç«¯é…ç½®æ¸…å•ï¼ˆæœ€å¸¸ç”¨çš„å‡ ä¸ªï¼‰

| é…ç½® | ä½œç”¨ | ç¤ºä¾‹ |
| --- | --- | --- |
| `LLM_PROVIDER` / `LLM_API_KEY` / `LLM_BASE_URL` | æŒ‡å®šæ¨ç† Model æ¥æº | `siliconflow` / `https://api.siliconflow.cn/v1` |
| `LLM_CHAT_MODEL` / `EMBEDDING_MODEL` | ä¸»æ¨¡å‹ + å‘é‡æ¨¡å‹ | `moonshotai/Kimi-K2-Thinking` / `Qwen/Qwen3-Embedding-8B` |
| `CHAT_MODE` | é»˜è®¤å¯¹è¯æ¨¡å¼ | `natural` / `free` / `strict` |
| `SUMMARIZATION_*` | ä¸Šä¸‹æ–‡å‹ç¼©è§¦å‘é˜ˆå€¼/ä¿ç•™æ¡æ•° | é»˜è®¤åœ¨ `.env.example` å·²å†™æ˜ |
| `AGENT_TOOL_RETRY_*` / `AGENT_TOOL_LIMIT_*` | å·¥å…·é‡è¯•ä¸è°ƒç”¨ä¸Šé™ | é˜²æ­¢æ¨¡å‹ç–¯ç‹‚è°ƒå·¥å…· |
| `MEMORY_*` | äº‹å®/å›¾è°±/ç”»åƒé…ç½® | æ§åˆ¶ SQLite / Qdrant å­˜å‚¨ä½ç½®ã€é˜ˆå€¼ |

> å®Œæ•´æ³¨é‡Šç‰ˆè¯·çœ‹ `backend/.env.example`ï¼Œç…§æŠ„å³å¯ã€‚

---

## 6. èƒ½åŠ›è¯¦æƒ…ï¼ˆæƒ³æ·±å…¥ä¸€ç‚¹çš„åŒå­¦çœ‹è¿™é‡Œï¼‰

### 6.1 Agent ç®¡çº¿äº®ç‚¹

1. **å¤šæ€æ¨ç†æ¨¡å‹**ï¼š`BaseReasoningChatModel` + `ReasoningChunk`ï¼ŒSSE åªä¾èµ–ç»Ÿä¸€æ¥å£ï¼Œæ¢ provider ä¸åŠ¨ä¸šåŠ¡å±‚ã€‚
2. **ä¸­é—´ä»¶çŸ©é˜µ**ï¼š
   - `SummarizationMiddleware` + `SummarizationBroadcastMiddleware`ï¼šå‹ç¼©ä¸Šä¸‹æ–‡å¹¶æ¨é€ `context.summarized` äº‹ä»¶ã€‚
   - `ToolRetry / ToolCallLimit / SequentialToolExecution`ï¼šä»é…ç½®æ§åˆ¶ç¨³å®šæ€§ã€‚
   - `TodoBroadcastMiddleware`ï¼šåœ¨å·¥å…·è°ƒç”¨é‡Œç”Ÿæˆ TODOï¼Œå‰ç«¯ä»¥å¡ç‰‡æ¸²æŸ“ã€‚
3. **è®°å¿†ç¼–æ’**ï¼š`Memory Orchestration Middleware` ä¸²è”ç”»åƒã€äº‹å®ã€å›¾è°±è¯»å†™ï¼Œå…¨ç¨‹ SSE æŠ¥å‘ŠæŠ½å–è¿›åº¦ã€‚
4. **SSE äº‹ä»¶æ—**ï¼š`llm.call.start/end`ã€`assistant.reasoning.delta`ã€`tool.start/end`ã€`context.summarized`ã€`assistant.todos` â€¦ ä¸å‰ç«¯æ—¶é—´çº¿ä¸€ä¸€å¯¹åº”ã€‚

### 6.2 å‰ç«¯ä½“éªŒ

- **æ—¶é—´çº¿å¼ Chat**ï¼šæ¯ä¸ª LLM Callã€æ¨ç†æ®µã€æ­£æ–‡æ®µã€å·¥å…·å¡ã€å•†å“å¡ã€Todos éƒ½æ˜¯ç‹¬ç«‹ç»„ä»¶ï¼ŒæŒ‰äº‹ä»¶æ’å…¥/æ›´æ–°ã€‚
- **çŠ¶æ€åŒæ­¥**ï¼š`use-timeline-reducer` æŠŠ SSE äº‹ä»¶å½’å¹¶ä¸ºç»Ÿä¸€ `TimelineItem`ï¼Œæ”¯æŒå€’å›å’Œè¡¥å†™ã€‚
- **UI æŠ€æœ¯æ ˆ**ï¼šNext.js App Routerã€Tailwindã€shadcn/uiã€è‡ªå®šä¹‰ Prompt Kit ç»„ä»¶ï¼ŒPC/ç§»åŠ¨ä¸¤ç«¯å¯ç”¨ã€‚
- **ä¸€é”®é…ç½®**ï¼š`.env.local` åªéœ€è¦ `NEXT_PUBLIC_API_URL`ï¼Œé»˜è®¤æŒ‡å‘ `http://localhost:8000`ã€‚

---

## 7. ç›®å½•åœ°å›¾ï¼ˆçœ‹åˆ°åå­—å°±çŸ¥é“å»å“ªæ”¹ï¼‰

```
embedAi-agent/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ core/              # é…ç½®ã€LLM æŠ½è±¡ã€Reasoning å¤šæ€
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ agent/         # Agent ä¸»æµç¨‹ & ä¸­é—´ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ memory/        # ç”»åƒ/äº‹å®/å›¾è°±æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ routers/           # FastAPI è·¯ç”± (chat/users/conversations/health)
â”‚   â”‚   â”œâ”€â”€ schemas/           # Pydantic Schema & SSE Payload
â”‚   â”‚   â””â”€â”€ repositories/      # SQLite è®¿é—®å±‚
â”‚   â”œâ”€â”€ scripts/               # å•†å“å¯¼å…¥ã€è¿ç§»è„šæœ¬
â”‚   â”œâ”€â”€ data/                  # æœ¬åœ° SQLiteã€æ ·ä¾‹æ•°æ®
â”‚   â””â”€â”€ tests/                 # å•æµ‹ï¼ˆè¦†ç›– SSEã€æ¨ç†ã€å·¥å…·ç­‰ï¼‰
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ app/                   # Next.js é¡µé¢ & API è·¯ç”±
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ features/chat      # æ—¶é—´çº¿ UI
â”‚   â”‚   â””â”€â”€ prompt-kit         # Prompt / Todo å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ hooks/                 # use-chatã€use-timeline ç­‰æ ¸å¿ƒ Hook
â”‚   â””â”€â”€ lib/                   # API å°è£…ã€å·¥å…·å‡½æ•°
â””â”€â”€ docker-compose.yml         # æœ¬åœ°ä¾èµ–ï¼ˆQdrant ç­‰ï¼‰ä¸€é”®æ‹‰èµ·
```

---

## 8. å¸¸ç”¨å‘½ä»¤ & è°ƒè¯•å…¥å£

| åœºæ™¯ | å‘½ä»¤ |
| --- | --- |
| åç«¯å¼€å‘ | `uv run uvicorn app.main:app --reload --port 8000` |
| å¯¼å…¥å•†å“ | `uv run python scripts/import_products.py` |
| åç«¯æµ‹è¯• | `uv run pytest` æˆ– `make test`ï¼ˆæŒ‰éœ€ï¼‰ |
| å‰ç«¯å¼€å‘ | `pnpm dev` |
| åµŒå…¥è„šæœ¬æ‰“åŒ… | `cd frontend && pnpm build:embed`ï¼ˆäº§ç‰©è§ `frontend/dist/embed/embed-ai-chat.js`ï¼‰ |
| Lint / Format | `uv run ruff check .` / `pnpm lint`ï¼ˆæˆ–è§å„å­ç›®å½• READMEï¼‰ |
| API æ–‡æ¡£ | `http://localhost:8000/docs` |

---

## 9. åµŒå…¥ä»»æ„ç½‘ç«™ï¼ˆä½¿ç”¨ `build:embed` äº§ç‰©ï¼‰

1. **æ„å»ºè„šæœ¬**
   ```bash
   cd frontend
   pnpm build:embed
   ```
   è¯¥å‘½ä»¤ä¼šä½¿ç”¨ `vite` + `embed/vite.config.ts` å°†å°ç»„ä»¶æ‰“æˆå•æ–‡ä»¶ï¼ˆIIFEï¼‰ï¼Œè¾“å‡ºåˆ° `frontend/dist/embed/embed-ai-chat.js`ï¼Œå¹¶è‡ªåŠ¨å†…è”æ ·å¼ï¼Œæ–¹ä¾¿ç›´æ¥æ‰˜ç®¡åˆ°ä»»æ„é™æ€å­˜å‚¨æˆ– CDNã€‚

2. **éƒ¨ç½²äº§ç‰©**
   - å°† `dist/embed/embed-ai-chat.js` ä¸Šä¼ åˆ°ä½ çš„é™æ€èµ„æºæœåŠ¡ï¼ˆOSSã€S3ã€Vercelã€Cloudflare Pages ç­‰ï¼‰ã€‚
   - è‹¥éœ€è¦å¤šç¯å¢ƒé…ç½®ï¼Œå¯æŒ‰åŸŸååŒºåˆ†ä¸åŒè„šæœ¬åœ°å€ã€‚

3. **åœ¨å¤–éƒ¨ç«™ç‚¹å¼•ç”¨**
   - **è‡ªåŠ¨åˆå§‹åŒ–ï¼ˆæ¨èï¼‰**
     ```html
     <script
       src="https://your-cdn.com/embed-ai-chat.js"
       data-auto-init
       data-api-base-url="https://your-backend.com"
       data-position="bottom-right"
       data-title="å•†å“æ¨èåŠ©æ‰‹">
     </script>
     ```
     `data-*` å±æ€§ä¼šåœ¨è„šæœ¬åŠ è½½åè‡ªåŠ¨è§¦å‘ `window.EmbedAiChat.init`ï¼Œå¹¶å°†é…ç½®ä¼ å…¥ã€‚å¯é€‰å‚æ•°åŒ…æ‹¬ `api-base-url`ã€`position`ï¼ˆ`bottom-right`/`bottom-left`ï¼‰ã€`primary-color`ã€`title`ã€`placeholder`ã€‚

   - **æ‰‹åŠ¨åˆå§‹åŒ–**
     ```html
     <script src="https://your-cdn.com/embed-ai-chat.js"></script>
     <script>
       window.EmbedAiChat.init({
         apiBaseUrl: "https://your-backend.com",
         position: "bottom-right",
         title: "å•†å“æ¨èåŠ©æ‰‹",
         placeholder: "è¾“å…¥æ¶ˆæ¯..."
       });
       // window.EmbedAiChat.destroy(); // éœ€è¦é”€æ¯æ—¶è°ƒç”¨
     </script>
     ```

4. **åç«¯ä¸è·¨åŸŸ**
   - ç¡®ä¿åç«¯ `.env` ä¸­çš„ `CORS_ALLOW_ORIGINS`ï¼ˆæˆ–ç›¸å…³é…ç½®ï¼‰åŒ…å«å¤–éƒ¨ç«™ç‚¹åŸŸåã€‚
   - ç”Ÿäº§ç¯å¢ƒè®°å¾—å¼€å¯ HTTPSã€é‰´æƒä¸é€Ÿç‡é™åˆ¶ï¼Œé¿å…è¢«æ»¥ç”¨ã€‚

> Demo å¯å‚è€ƒ `frontend/embed/demo.html`ï¼Œå®ƒå±•ç¤ºäº†æ‰“åŒ…äº§ç‰©å¦‚ä½•åœ¨ç‹¬ç«‹é¡µé¢è¢«å¼•ç”¨ã€‚

---

## 9. ä¸‹ä¸€æ­¥ä½ å¯ä»¥

1. **åˆ‡æ¢ provider**ï¼šåªæ”¹ `.env`ï¼Œé©¬ä¸Šä½“éªŒä¸åŒæ¨¡å‹çš„æ¨ç†å·®å¼‚ã€‚
2. **æ‰©å±•å·¥å…·**ï¼šåœ¨ `backend/app/services/agent/tools/` æ–°å¢å•†å“å·¥å…·ï¼Œå®ƒä¼šè‡ªåŠ¨å‡ºç°åœ¨æ¨ç†æµç¨‹ä¸­ã€‚
3. **è‡ªå®šä¹‰å‰ç«¯å±•ç¤º**ï¼šTimeline ç»„ä»¶å¤©ç„¶æ”¯æŒæ’æ§½ï¼Œæ–°å¢å¡ç‰‡ç±»å‹å¾ˆè½»æ¾ã€‚
4. **éƒ¨ç½²ç”Ÿäº§**ï¼šæŠŠ SQLite æ¢æˆ Postgresï¼ŒæŠŠ Qdrant æ¢æˆæ‰˜ç®¡æœåŠ¡ï¼Œå†åŠ ä¸Š API Key ç®¡ç†å³å¯ä¸Šçº¿ã€‚

---

> æœ‰é—®é¢˜ï¼Ÿç›´æ¥ç¿» `backend/README.md` å’Œ `frontend/README.md` è·å–æ›´ç»†çš„å‘½ä»¤è¡ŒæŒ‡å—ã€‚è¿™é‡Œåªè´Ÿè´£è®©ä½ â€œå…ˆæ‡‚å†è¯´â€ã€‚
