#############################################
# Backend Environment Variables (.env)
# Copy this file to `.env` and fill in values
#############################################

########################
# SiliconFlow (OpenAI-compatible) - REQUIRED
# All fields below are REQUIRED with no defaults
########################

# [REQUIRED] Your SiliconFlow API key
SILICONFLOW_API_KEY=your-api-key-here

# [REQUIRED] API base URL
SILICONFLOW_BASE_URL=https://api.siliconflow.cn/v1

# [REQUIRED] Chat model ID (must match SiliconFlow model id)
# Model capabilities will be fetched from models.dev automatically
# Examples: moonshotai/Kimi-K2-Instruct, Qwen/Qwen3-235B-A22B-Thinking-2507
SILICONFLOW_CHAT_MODEL=moonshotai/Kimi-K2-Thinking

# [REQUIRED] Embedding model ID
SILICONFLOW_EMBEDDING_MODEL=Qwen/Qwen3-Embedding-8B

# [REQUIRED] Embedding dimension
SILICONFLOW_EMBEDDING_DIMENSION=4096

# Manual model capability profiles (JSON) - OVERRIDES models.dev
# Use this to override or supplement models.dev data for specific models
# Usually not needed if models.dev has your model's data
#
# IMPORTANT:
# - JSON booleans must be `true/false` (not Python True/False)
# - Wrap the whole JSON with SINGLE quotes to avoid shell escaping issues
# - Keys are matched by lowercased model name
#
# Example:
# SILICONFLOW_MODEL_PROFILES_JSON='{
#   "moonshotai/kimi-k2-instruct": {
#     "reasoning_output": false,
#     "tool_calling": true,
#     "structured_output": true,
#     "max_input_tokens": 131000,
#     "max_output_tokens": 131000
#   }
# }'
SILICONFLOW_MODEL_PROFILES_JSON=

########################
# models.dev Integration
########################
# models.dev is an open-source database of AI model specifications
# API: https://models.dev/api.json
# GitHub: https://github.com/sst/models.dev
#
# On startup, model capabilities are fetched from models.dev
# Merge rule: models.dev as base, SILICONFLOW_MODEL_PROFILES_JSON as override

# Enable/disable models.dev auto-fetch (true/false)
MODELS_DEV_ENABLED=true

# API URL (usually no need to change)
MODELS_DEV_API_URL=https://models.dev/api.json

# Provider ID in the API response
MODELS_DEV_PROVIDER_ID=siliconflow

# Request timeout in seconds
MODELS_DEV_TIMEOUT_SECONDS=10.0

# Cache TTL in seconds (86400 = 24 hours, 0 = no cache)
MODELS_DEV_CACHE_TTL_SECONDS=86400.0

########################
# Qdrant
########################
QDRANT_HOST=localhost
QDRANT_PORT=6333
QDRANT_COLLECTION=products

########################
# Database (SQLite)
########################
DATABASE_PATH=./data/app.db
CHECKPOINT_DB_PATH=./data/checkpoints.db

########################
# Text processing
########################
CHUNK_SIZE=800
CHUNK_OVERLAP=100

########################
# Service
########################
API_HOST=0.0.0.0
API_PORT=8000
CORS_ORIGINS=http://localhost:3000

########################
# Logging
########################
LOG_LEVEL=DEBUG
LOG_MODE=detailed
LOG_FILE=./logs/app.log
LOG_FILE_ROTATION=10 MB
LOG_FILE_RETENTION=7 days
